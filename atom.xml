<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>猫大叔</title>
  
  <subtitle>关注前端，热爱生活</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://21ido.com/"/>
  <updated>2024-03-08T07:16:49.431Z</updated>
  <id>http://21ido.com/</id>
  
  <author>
    <name>猫大叔</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>npm、yarn和npm的古往今来</title>
    <link href="http://21ido.com/2023/12/4fefd04c/"/>
    <id>http://21ido.com/2023/12/4fefd04c/</id>
    <published>2023-12-14T13:36:52.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;未完结，更新中…&lt;/p&gt;
&lt;h3 id=&quot;I-引言&quot;&gt;&lt;a href=&quot;#I-引言&quot; class=&quot;headerlink&quot; title=&quot;I. 引言&quot;&gt;&lt;/a&gt;I. 引言&lt;/h3&gt;&lt;h4 id=&quot;1-npm背景介绍&quot;&gt;&lt;a href=&quot;#1-npm背景介绍&quot; class=&quot;headerlink&quot; title=&quot;1. npm背景介绍&quot;&gt;&lt;/a&gt;1. npm背景介绍&lt;/h4&gt;&lt;p&gt;Node.js的第一个版本是由Ryan Dahl创建的，最初发布于2009年5月27日&lt;br&gt;该版本基于v8引擎，提供了一个事件驱动、非阻塞I/O环境，使得JS可以运行在服务器环境下&lt;br&gt;而为了解决node.js生态系统中包的管理问题，在2010年，Isaac Z. Schlueter发布了npm&lt;/p&gt;
&lt;h4 id=&quot;2-包管理工具的重要性&quot;&gt;&lt;a href=&quot;#2-包管理工具的重要性&quot; class=&quot;headerlink&quot; title=&quot;2. 包管理工具的重要性&quot;&gt;&lt;/a&gt;2. 包管理工具的重要性&lt;/h4&gt;&lt;p&gt;包管理工具在现代软件开发中是不可或缺的一部分，其重要性体现在以下几个方面：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;依赖管理：&lt;/strong&gt; 软件开发通常依赖于许多第三方库和工具。包管理工具能够方便地安装、更新和卸载这些依赖，确保项目能够顺利运行并保持最新状态。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;版本控制：&lt;/strong&gt; 包管理工具提供了对依赖项版本的控制机制。通过语义化版本控制（Semantic Versioning），开发者能够明确指定项目对依赖项的版本要求，避免由于版本不一致导致的兼容性问题。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;易于分享和分发：&lt;/strong&gt; 包管理工具使得开发者能够方便地分享自己的代码库（包）给其他人使用。这种分享机制促进了开源社区的发展，使得开发者能够从全球范围内获取并贡献代码。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;构建和部署：&lt;/strong&gt; 包管理工具通常集成了构建和打包的功能，简化了项目的构建过程。通过包管理工具，开发者可以轻松地将项目部署到生产环境中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;自动化任务：&lt;/strong&gt; 包管理工具支持定义和运行各种自动化任务，例如运行测试、执行代码风格检查、生成文档等。这些任务可以通过配置文件或命令行参数进行定制，提高了开发过程的效率。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;安全性：&lt;/strong&gt; 包管理工具通常包含安全审查机制，能够检测并报告依赖项中存在的安全漏洞。这有助于开发者及时采取措施，保障项目的安全性。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;多项目管理：&lt;/strong&gt; 对于大型项目或使用多个子项目的情况，包管理工具支持工作区（workspace）和多包存储库，使得依赖项的管理更加灵活。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;环境隔离：&lt;/strong&gt; 包管理工具可以创建虚拟环境，将项目的依赖项隔离开来，避免了不同项目之间的冲突。这种隔离有助于确保项目在不同环境中的稳定性。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="nodejs" scheme="http://21ido.com/tags/nodejs/"/>
    
      <category term="npm" scheme="http://21ido.com/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>当空数组遇上every, some</title>
    <link href="http://21ido.com/2023/09/1a355503/"/>
    <id>http://21ido.com/2023/09/1a355503/</id>
    <published>2023-09-16T02:18:12.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;早在17年写过一篇JS数组的文章&lt;br&gt;&lt;a href=&quot;/2017/03/10afd6ef/&quot; title=&quot;Javascript数组的every、some、map、filter、forEach&quot;&gt;Javascript数组的every、some、map、filter、forEach&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;文中提到&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;every&lt;/em&gt;，判断是否所有元素都符合，需要每个都为true才返回true，否则返回false&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个说法有误，当传入空数组时，返回的也是 true&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[].&lt;span class=&quot;title function_&quot;&gt;every&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;_&lt;/span&gt; =&amp;gt;&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//--&amp;gt; true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;所以并不是说数组每个都为true时结果才为true，这点就很费解了&lt;br&gt;然后搜了ECMA-262规范的实现&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="ES5" scheme="http://21ido.com/tags/ES5/"/>
    
  </entry>
  
  <entry>
    <title>EventSource使用指南</title>
    <link href="http://21ido.com/2023/07/b5cab5bb/"/>
    <id>http://21ido.com/2023/07/b5cab5bb/</id>
    <published>2023-07-27T03:46:25.000Z</published>
    <updated>2024-03-08T07:16:49.427Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;EventSource是基于http协议的推送技术，用于服务器主动向客户端发送数据，而不需要客服端主动请求&lt;/p&gt;
&lt;h3 id=&quot;1-优缺点&quot;&gt;&lt;a href=&quot;#1-优缺点&quot; class=&quot;headerlink&quot; title=&quot;1. 优缺点&quot;&gt;&lt;/a&gt;1. 优缺点&lt;/h3&gt;&lt;p&gt;优点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;基于http1.1，目前浏览器都支持&lt;/li&gt;
&lt;li&gt;自动断线重连，无需另写心跳检测&lt;/li&gt;
&lt;li&gt;支持自定义消息类型&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;缺点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;单向通讯，客户端无法向服务端发送数据&lt;/li&gt;
&lt;li&gt;仅支持纯文本，二进制数据需转码才能传送&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;相比于Websocket，EventSource更加轻量级，而且Websocket是独立协议，需要服务端支持&lt;br&gt;除了不能主动发送数据，可以说Websocket能做的，EventSource都能做&lt;/p&gt;
&lt;h3 id=&quot;2-应用场景&quot;&gt;&lt;a href=&quot;#2-应用场景&quot; class=&quot;headerlink&quot; title=&quot;2. 应用场景&quot;&gt;&lt;/a&gt;2. 应用场景&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ChatGPT&lt;/li&gt;
&lt;li&gt;天气预报&lt;/li&gt;
&lt;li&gt;股票外汇等价格牌&lt;/li&gt;
&lt;li&gt;火车公交位置牌&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3-建立连接&quot;&gt;&lt;a href=&quot;#3-建立连接&quot; class=&quot;headerlink&quot; title=&quot;3. 建立连接&quot;&gt;&lt;/a&gt;3. 建立连接&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2023/07/eventsource1.png&quot; alt=&quot;EventSource&quot;&gt;&lt;/p&gt;
&lt;p&gt;EventSource使用简单，目前流行浏览器均支持&lt;/p&gt;
&lt;p&gt;本文用node来写服务端的请求response&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="eventsource" scheme="http://21ido.com/tags/eventsource/"/>
    
      <category term="http" scheme="http://21ido.com/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>什么是灰度测试</title>
    <link href="http://21ido.com/2023/05/434fdf21/"/>
    <id>http://21ido.com/2023/05/434fdf21/</id>
    <published>2023-05-22T03:03:27.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-灰度的来源&quot;&gt;&lt;a href=&quot;#1-灰度的来源&quot; class=&quot;headerlink&quot; title=&quot;1. 灰度的来源&quot;&gt;&lt;/a&gt;1. 灰度的来源&lt;/h2&gt;&lt;p&gt;当软件升级迭代在遇到架构或功能大改动（技术层面），或是需求和操作的大调整（用户体验层面），往往不是全量发布，而是先小范围发布，没有问题再增量到全部用户，这一过程，类似由白到黑的过度，而白与黑之间均为灰色，所以这一部署过程也叫灰度测试&lt;/p&gt;
&lt;h2 id=&quot;2-目的&quot;&gt;&lt;a href=&quot;#2-目的&quot; class=&quot;headerlink&quot; title=&quot;2. 目的&quot;&gt;&lt;/a&gt;2. 目的&lt;/h2&gt;&lt;p&gt;灰度测试是软件发布的一种测试方法，它通过向一小部分真实用户开放测试，接收他们的真实使用反馈和及时修复问题，从而降低改动带来的风险。&lt;/p&gt;
&lt;h2 id=&quot;3-流程&quot;&gt;&lt;a href=&quot;#3-流程&quot; class=&quot;headerlink&quot; title=&quot;3. 流程&quot;&gt;&lt;/a&gt;3. 流程&lt;/h2&gt;&lt;p&gt;灰度测试的流程可以概括为以下几个步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;确定测试目标和测试人员：在灰度测试前，需要明确测试的目标和测试人员，以便确定测试的范围和测试指标。&lt;/li&gt;
&lt;li&gt;确定策略：包括部署策略、用户规模、覆盖率和回滚策略。&lt;/li&gt;
&lt;li&gt;分批次放量：需要分批次放量，先将新版本软件部署给一部分用户使用，观察其运行情况。如果没有问题，再逐渐扩大用户量，直至将新版本软件全部部署。&lt;/li&gt;
&lt;li&gt;收集反馈和修复问题：在测试过程中，需要及时收集用户的反馈和问题，对问题进行分析和修复&lt;/li&gt;
&lt;li&gt;再次发布新版本，确保没问题后逐渐扩大用户覆盖范围，直到100%全覆盖&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;4-注意事项&quot;&gt;&lt;a href=&quot;#4-注意事项&quot; class=&quot;headerlink&quot; title=&quot;4. 注意事项&quot;&gt;&lt;/a&gt;4. 注意事项&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;在真实环境下进行灰度测试，尽可能模拟真实的用户使用场景。&lt;/li&gt;
&lt;li&gt;分析测试结果，并及时修复问题。&lt;/li&gt;
&lt;li&gt;有一个完善的测试计划和测试指标，以便于评估测试的效果。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;综上所述，灰度测试是软件开发过程中不可或缺的环节，可以帮助开发人员及时发现和修复问题，提高软件的质量和用户体验。但是，在进行灰度测试时需要注意相关的注意事项，以确保测试的有效性和可靠性&lt;/p&gt;
&lt;h2 id=&quot;5-部署&quot;&gt;&lt;a href=&quot;#5-部署&quot; class=&quot;headerlink&quot; title=&quot;5. 部署&quot;&gt;&lt;/a&gt;5. 部署&lt;/h2&gt;&lt;p&gt;本章图片均搜自谷歌，如有冒犯，请联系我删除&lt;/p&gt;
&lt;h3 id=&quot;5-1-蓝绿部署&quot;&gt;&lt;a href=&quot;#5-1-蓝绿部署&quot; class=&quot;headerlink&quot; title=&quot;5.1 蓝绿部署&quot;&gt;&lt;/a&gt;5.1 蓝绿部署&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2023/05/grey1.png&quot; alt=&quot;蓝绿部署&quot; title=&quot;蓝绿部署&quot;&gt;&lt;/p&gt;
&lt;p&gt;蓝色为原始版本环境，绿色为新版本环境&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="CI/CD" scheme="http://21ido.com/tags/CI-CD/"/>
    
      <category term="软件测试" scheme="http://21ido.com/tags/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Github Actions实现Hexo自动化部署</title>
    <link href="http://21ido.com/2023/05/49292e5e/"/>
    <id>http://21ido.com/2023/05/49292e5e/</id>
    <published>2023-05-03T15:26:22.000Z</published>
    <updated>2024-03-08T07:16:49.427Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;本文介绍了如何使用GitHub Actions实现Hexo自动化部署，并指出了一些现有YAML代码所引用的脚本比较老导致报错的问题。&lt;/p&gt;
&lt;p&gt;Hexo是一个快速、简单且强大的静态博客框架，而GitHub Actions则是一项功能强大的CI/CD工具，可以自动化地执行软件开发工作流程，用于自动构建、测试和部署代码，从而加快软件开发周期。&lt;/p&gt;
&lt;p&gt;GitHub Actions使用YAML脚本语言，一种轻量级的标记语言，语法简单，相比JSON更加简介，可以轻松地编写和维护自动化工作流程。&lt;/p&gt;
&lt;h2 id=&quot;1-SSH秘钥&quot;&gt;&lt;a href=&quot;#1-SSH秘钥&quot; class=&quot;headerlink&quot; title=&quot;1. SSH秘钥&quot;&gt;&lt;/a&gt;1. SSH秘钥&lt;/h2&gt;&lt;p&gt;我的Hexo分2个Git仓库，源码为私库 21ido.com，发布到 GitHub Pages为公开库 think2cat.github.io&lt;/p&gt;
&lt;p&gt;因为是从源码私库push到Pages公开库，此时需要在公开库设置公钥&lt;/p&gt;
&lt;h3 id=&quot;1-1-生成秘钥&quot;&gt;&lt;a href=&quot;#1-1-生成秘钥&quot; class=&quot;headerlink&quot; title=&quot;1.1 生成秘钥&quot;&gt;&lt;/a&gt;1.1 生成秘钥&lt;/h3&gt;&lt;p&gt;执行下面代码，其中邮箱替换成自己的&lt;br&gt;&lt;figure class=&quot;highlight cmd&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ssh-keygen -t rsa -b &lt;span class=&quot;number&quot;&gt;4096&lt;/span&gt; -C &amp;quot;gavin2026@xxx.com&amp;quot; -f hexo -N &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;生成2个文件，hexo 和 hexo.pub&lt;/p&gt;
&lt;h3 id=&quot;1-2-设置公钥&quot;&gt;&lt;a href=&quot;#1-2-设置公钥&quot; class=&quot;headerlink&quot; title=&quot;1.2 设置公钥&quot;&gt;&lt;/a&gt;1.2 设置公钥&lt;/h3&gt;&lt;p&gt;用记事本打开 hexo.pub，全选复制后到GitHub Pages库&lt;/p&gt;
&lt;p&gt;Settings &amp;gt; Deploy keys &amp;gt; Add deploy key&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2023/05/actions1.png&quot; alt=&quot;Deploy key&quot;&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="Git" scheme="http://21ido.com/tags/Git/"/>
    
      <category term="Github" scheme="http://21ido.com/tags/Github/"/>
    
      <category term="CI/CD" scheme="http://21ido.com/tags/CI-CD/"/>
    
  </entry>
  
  <entry>
    <title>宏任务、微任务</title>
    <link href="http://21ido.com/2020/09/5bd537b/"/>
    <id>http://21ido.com/2020/09/5bd537b/</id>
    <published>2020-09-14T02:34:10.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;首先，JavaScript是单线程语言&lt;/p&gt;
&lt;h3 id=&quot;1-进程和线程的关系&quot;&gt;&lt;a href=&quot;#1-进程和线程的关系&quot; class=&quot;headerlink&quot; title=&quot;1. 进程和线程的关系&quot;&gt;&lt;/a&gt;1. 进程和线程的关系&lt;/h3&gt;&lt;p&gt;一个程序至少有一个进程，而一个进程至少有一个线程&lt;br&gt;线程是进程的实体，是CPU调度和分派的基本单位，可以看成实际在干活运算的是线程，而进程只是一个或多个线程的资源分配和调度的系统单位&lt;/p&gt;
&lt;p&gt;进程如果是一个工厂，线程则是工厂里干活的工人&lt;br&gt;工人共享一个劳动空间，共享劳动工具&lt;/p&gt;
&lt;p&gt;就是说进程里，有一个或多个线程，各线程共享同个内存空间和数据&lt;/p&gt;
&lt;p&gt;可以看看阮一峰的&lt;a href=&quot;https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html&quot;&gt;《进程与线程的一个简单解释》&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-浏览器是多线程&quot;&gt;&lt;a href=&quot;#2-浏览器是多线程&quot; class=&quot;headerlink&quot; title=&quot;2. 浏览器是多线程&quot;&gt;&lt;/a&gt;2. 浏览器是多线程&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;GUI渲染线程&lt;/li&gt;
&lt;li&gt;JS引擎线程&lt;/li&gt;
&lt;li&gt;事件触发线程&lt;/li&gt;
&lt;li&gt;定时触发线程&lt;/li&gt;
&lt;li&gt;异步http请求线程&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中，GUI线程和JS线程，是互斥！也就是某些页面在做JS运算时，会导致DOM刷新卡住的根源。&lt;br&gt;所以当JS线程在执行运算时，GUI线程是挂起的&lt;br&gt;早期通过在代码增加&lt;code&gt;setTimeout&lt;/code&gt;来解决渲染卡顿问题&lt;/p&gt;
&lt;h3 id=&quot;3-Javascript是单线程&quot;&gt;&lt;a href=&quot;#3-Javascript是单线程&quot; class=&quot;headerlink&quot; title=&quot;3. Javascript是单线程&quot;&gt;&lt;/a&gt;3. Javascript是单线程&lt;/h3&gt;&lt;p&gt;JavaScript可以同时执行多个JS文件代码，看似多线程同时执行，其实还是单线程，只不过是分隔成多个任务，在不同任务跳转进行运算&lt;/p&gt;
&lt;p&gt;Javascript的执行机制称为Event Loop&lt;/p&gt;
&lt;p&gt;任务又分为同步和异步&lt;/p&gt;
&lt;p&gt;同步任务都在主线程上执行，遇到异步任务，则丢到任务队列，接着继续执行同步任务，等到同步任务执行完毕，主线程空闲了，才会回过头去查看任务队列&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2020/09/task.jpg&quot; alt=&quot;event loop&quot;&gt;&lt;br&gt;（图片搜自谷歌）&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="ES6" scheme="http://21ido.com/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>VUE代码规范</title>
    <link href="http://21ido.com/2019/07/c9ca51c5/"/>
    <id>http://21ido.com/2019/07/c9ca51c5/</id>
    <published>2019-07-22T06:21:08.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;为规范代码特写了本文，但实际由于历史包袱，还有很多jQuery时代的代码，加上人员技术水平不齐，执行起来非常有难度&lt;/p&gt;
&lt;h2 id=&quot;1-目的&quot;&gt;&lt;a href=&quot;#1-目的&quot; class=&quot;headerlink&quot; title=&quot;1. 目的&quot;&gt;&lt;/a&gt;1. 目的&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;易于阅读和理解&lt;/li&gt;
&lt;li&gt;有助于debug&lt;/li&gt;
&lt;li&gt;方便接手的人&lt;/li&gt;
&lt;li&gt;不挖坑&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;2-目录和文件规范&quot;&gt;&lt;a href=&quot;#2-目录和文件规范&quot; class=&quot;headerlink&quot; title=&quot;2. 目录和文件规范&quot;&gt;&lt;/a&gt;2. 目录和文件规范&lt;/h2&gt;&lt;h3 id=&quot;2-1-目录结构&quot;&gt;&lt;a href=&quot;#2-1-目录结构&quot; class=&quot;headerlink&quot; title=&quot;2.1 目录结构&quot;&gt;&lt;/a&gt;2.1 目录结构&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;src                                  源码目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- api                              接口，统一管理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- assets                           静态资源，统一管理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- components                       公用组件，全局文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- config                           配置信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- filters                          过滤器，全局工具&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- icons                            图标，全局资源&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- layout                           页面模板&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- libs                             公用工具库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- mock                             模拟接口，临时存放&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- store                            vuex, 状态管理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- router                           路由，统一管理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- views                            视图目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|   |-- account                      视图模块名&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|   |-- |-- mygroup.vue              模块入口页面&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="vuejs" scheme="http://21ido.com/tags/vuejs/"/>
    
  </entry>
  
  <entry>
    <title>ES6笔记(3)类</title>
    <link href="http://21ido.com/2019/03/1eabff52/"/>
    <id>http://21ido.com/2019/03/1eabff52/</id>
    <published>2019-03-01T10:04:38.000Z</published>
    <updated>2024-03-08T07:16:49.427Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;ES5是没有类这个东西，虽然可以写出看起来像类的代码&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;Cat&lt;/span&gt; (name, color) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; ret = &lt;span class=&quot;title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;create&lt;/span&gt;(&lt;span class=&quot;title class_&quot;&gt;Cat&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ret.&lt;span class=&quot;property&quot;&gt;name&lt;/span&gt; = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ret.&lt;span class=&quot;property&quot;&gt;color&lt;/span&gt; = color&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; ret&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Cat&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;prototype&lt;/span&gt;&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;say&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;say&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;name&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;eat&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;eat&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 使用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;BlackCat&lt;/span&gt; = &lt;span class=&quot;title class_&quot;&gt;Cat&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;Lily&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;BlackCat&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;say&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; say lily&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;到了ES6，有了比较正经的写法&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Cat&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;title function_&quot;&gt;constructor&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;name, color&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;name&lt;/span&gt; = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;color&lt;/span&gt; = color&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;title function_&quot;&gt;say&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;say&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;name&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;title function_&quot;&gt;eat&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;eat&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 使用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;BlackCat&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Cat&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;Lily&amp;#x27;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&amp;#x27;black&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;BlackCat&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;say&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; say lily&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;因为有了构造函数 &lt;code&gt;constructor&lt;/code&gt; 看起来就比较像传统类&lt;/p&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="ES6" scheme="http://21ido.com/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>Canvas踩坑(2)马克笔效果</title>
    <link href="http://21ido.com/2018/12/27f27d32/"/>
    <id>http://21ido.com/2018/12/27f27d32/</id>
    <published>2018-12-24T11:52:27.000Z</published>
    <updated>2024-03-08T07:16:49.427Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/2018/12/markerpen0.png&quot; alt=&quot;Marker Pen&quot;&gt;&lt;/p&gt;
&lt;p&gt;画笔里面，马克笔算是比较简单，比较难的是铅笔和毛笔&lt;/p&gt;
&lt;p&gt;一般的线是由点连起来的，设置好 &lt;code&gt;lineCap&lt;/code&gt; 和 &lt;code&gt;lineJoin&lt;/code&gt; 即可，但马克笔是由&lt;strong&gt;块&lt;/strong&gt;连起来的&lt;/p&gt;
&lt;p&gt;当我们拿到一个XY坐标点后，需进行扩大，使其变成一个矩形&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="canvas" scheme="http://21ido.com/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>Canvas踩坑(1)实时绘制透明线</title>
    <link href="http://21ido.com/2018/11/4d59cb14/"/>
    <id>http://21ido.com/2018/11/4d59cb14/</id>
    <published>2018-11-23T08:51:24.000Z</published>
    <updated>2024-03-08T07:16:49.427Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/2018/11/canvasOpacity_1.png&quot; alt=&quot;canvasOpacity_1&quot;&gt;&lt;/p&gt;
&lt;p&gt;Canvas画线算是最基础的操作，涉及的方法也比较简单&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_cv = _canvas.&lt;span class=&quot;title function_&quot;&gt;getContext&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;2d&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;property&quot;&gt;lineWidth&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;property&quot;&gt;strokeStyle&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;#x27;red&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;title function_&quot;&gt;beginPath&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;title function_&quot;&gt;moveTo&lt;/span&gt;(point.&lt;span class=&quot;property&quot;&gt;x&lt;/span&gt;, point.&lt;span class=&quot;property&quot;&gt;y&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;title function_&quot;&gt;lineTo&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;x&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;y&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;title function_&quot;&gt;stroke&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;点很多的话，加个 &lt;code&gt;for&lt;/code&gt; 循环也轻松搞定，如果画的是透明线，只需用 RGBA 格式即可，比如上图颜色为&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;_cv.&lt;span class=&quot;property&quot;&gt;strokeStyle&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;#x27;rgba(253, 150, 38, 0.41)&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="canvas" scheme="http://21ido.com/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>element-ui upload组件覆写默认上传行为</title>
    <link href="http://21ido.com/2018/09/a91bebb6/"/>
    <id>http://21ido.com/2018/09/a91bebb6/</id>
    <published>2018-09-20T03:15:35.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;element-ui 自带了上传组件，支持多文件，支持文件列表显示，支持定义各种钩子，非常方便&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;el-upload&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;ref&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;upload&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:show-file-list&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;false&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:action&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;uploadUrl&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:before-upload&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;handleBeforeUpload&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:on-progress&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;handleUploading&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:on-success&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;handleUpload&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:on-error&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;handleUploadError&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;accept&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;.apk&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;:auto-upload&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;el-button&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;slot&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;trigger&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;:loading&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;uploadLoading&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;size&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;mini&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;primary&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;上传&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;el-button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;span&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;v-html&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;tips&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;el-upload&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同时也提供了 &lt;code&gt;http-request&lt;/code&gt; 参数来自定义上传行为&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="axios" scheme="http://21ido.com/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>异步回调之generator（1）入门篇</title>
    <link href="http://21ido.com/2018/09/ddbd4da6/"/>
    <id>http://21ido.com/2018/09/ddbd4da6/</id>
    <published>2018-09-11T09:39:39.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;什么是Generator&quot;&gt;&lt;a href=&quot;#什么是Generator&quot; class=&quot;headerlink&quot; title=&quot;什么是Generator&quot;&gt;&lt;/a&gt;什么是Generator&lt;/h3&gt;&lt;p&gt;Generator 是ES6新特性，是另一种异步编程解决方案，提供了与之前传统函数不一样的语法行为&lt;br&gt;如果说Promise解决了回调函数的地狱式嵌套，Generator则解决了Promise.then()的多级链式调用&lt;/p&gt;
&lt;h3 id=&quot;语法&quot;&gt;&lt;a href=&quot;#语法&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/a&gt;语法&lt;/h3&gt;&lt;p&gt;&lt;code&gt;function* Generator()&lt;/code&gt; Generator写法跟普通函数一样，&lt;code&gt;function&lt;/code&gt; 和函数名 &lt;code&gt;Generator&lt;/code&gt; 中间多了个&lt;code&gt;*&lt;/code&gt;号，同时函数内部可以使用 &lt;code&gt;yield&lt;/code&gt; 进行暂停并输出值&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// *号可随意放置，推荐使用第一种写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;* &lt;span class=&quot;title class_&quot;&gt;Generator&lt;/span&gt;() &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; * &lt;span class=&quot;title class_&quot;&gt;Generator&lt;/span&gt;() &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; *&lt;span class=&quot;title class_&quot;&gt;Generator&lt;/span&gt;() &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;*&lt;span class=&quot;title class_&quot;&gt;Generator&lt;/span&gt;() &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="ES6" scheme="http://21ido.com/tags/ES6/"/>
    
      <category term="generator" scheme="http://21ido.com/tags/generator/"/>
    
  </entry>
  
  <entry>
    <title>Axios笔记(2)</title>
    <link href="http://21ido.com/2018/08/786557a3/"/>
    <id>http://21ido.com/2018/08/786557a3/</id>
    <published>2018-08-31T09:11:44.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;实例化&quot;&gt;&lt;a href=&quot;#实例化&quot; class=&quot;headerlink&quot; title=&quot;实例化&quot;&gt;&lt;/a&gt;实例化&lt;/h2&gt;&lt;p&gt;上一篇说了基本用法，实际使用中并不会直接调用，而是实例化一个对象&lt;br&gt;并配置好基本参数，然后所有请求走实例化对象&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; service = axios.&lt;span class=&quot;title function_&quot;&gt;create&lt;/span&gt;(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;baseURL&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;/api1.0/&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;timeout&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;5000&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;// request timeout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;list&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;query&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;service&lt;/span&gt;(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;url&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;getList&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;method&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;post&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;data&lt;/span&gt;: query&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 调用示例&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;list&lt;/span&gt;(query).&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;配置参数较多，参照 &lt;a href=&quot;https://github.com/axios/axios&quot;&gt;Axios官网&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;拦截器&quot;&gt;&lt;a href=&quot;#拦截器&quot; class=&quot;headerlink&quot; title=&quot;拦截器&quot;&gt;&lt;/a&gt;拦截器&lt;/h2&gt;&lt;p&gt;axios支持拦截器，可以在请求和返回时进行拦截处理
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="http" scheme="http://21ido.com/tags/http/"/>
    
      <category term="axios" scheme="http://21ido.com/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>Axios笔记(1)</title>
    <link href="http://21ido.com/2018/08/e16c0619/"/>
    <id>http://21ido.com/2018/08/e16c0619/</id>
    <published>2018-08-24T05:02:03.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;Axios 是基于 promise 的http库，可在nodejs服务端或客户端浏览器运行&lt;br&gt;其中浏览器使用XMLHttpRequests对象进行请求&lt;br&gt;&lt;a href=&quot;https://github.com/axios/axios/&quot;&gt;Github地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;特点&quot;&gt;&lt;a href=&quot;#特点&quot; class=&quot;headerlink&quot; title=&quot;特点&quot;&gt;&lt;/a&gt;特点&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;支持服务端和客户端&lt;/li&gt;
&lt;li&gt;基于Promise&lt;/li&gt;
&lt;li&gt;支持请求和响应拦截&lt;/li&gt;
&lt;li&gt;支持JSON格式转换&lt;/li&gt;
&lt;li&gt;支持取消请求
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="http" scheme="http://21ido.com/tags/http/"/>
    
      <category term="axios" scheme="http://21ido.com/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>Promise入门指南(5)</title>
    <link href="http://21ido.com/2018/08/33ad2a19/"/>
    <id>http://21ido.com/2018/08/33ad2a19/</id>
    <published>2018-08-09T16:26:24.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Promise-catch&quot;&gt;&lt;a href=&quot;#Promise-catch&quot; class=&quot;headerlink&quot; title=&quot;Promise.catch&quot;&gt;&lt;/a&gt;Promise.catch&lt;/h3&gt;&lt;p&gt;&lt;code&gt;catch&lt;/code&gt; 是用来捕获异常的，但是网上很多教程代码把 &lt;code&gt;catch&lt;/code&gt; 当 &lt;code&gt;rejected&lt;/code&gt; 使用，这是不当的&lt;/p&gt;
&lt;p&gt;前面说了 Promise 有3种状态， pending, fulffilled, rejected&lt;br&gt;并没有一种状态叫异常，实际使用中，能确定的状态用 resolve / reject 来回调，而不是丢到 catch&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 错误示例&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; p1 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// try something&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;something error&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p1.&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;v&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;p2&amp;#x27;&lt;/span&gt;, v)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;).&lt;span class=&quot;title function_&quot;&gt;catch&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;v&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;p3&amp;#x27;&lt;/span&gt;, v)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这样当报错时，会抛到 catch 去执行，而实际有些错误是可预见的，所以当可预见和不可预见的错误，都往 catch 报的时候，就没法判断了，因此建议用 reject 来处理可预见性的错误&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="promise" scheme="http://21ido.com/tags/promise/"/>
    
  </entry>
  
  <entry>
    <title>Promise入门指南(4)</title>
    <link href="http://21ido.com/2018/07/2ab61b58/"/>
    <id>http://21ido.com/2018/07/2ab61b58/</id>
    <published>2018-07-21T15:25:12.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Promise-all&quot;&gt;&lt;a href=&quot;#Promise-all&quot; class=&quot;headerlink&quot; title=&quot;Promise.all&quot;&gt;&lt;/a&gt;Promise.all&lt;/h3&gt;&lt;p&gt;有一些场景，需要同时调用几个接口，拿到全部返回数据，才能接着往下调用&lt;br&gt;以往遇到这种情况，需要设置一些临时变量来记录每个接口是否返回数据，每次返回时再判断是否数据已经齐全，再往下接着走&lt;br&gt;而 all 方法就是为此而生的，接受参数为 Promise对象数组&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; pArr = [];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pArr.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;() =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;p1 resolve&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;resp1&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;, &lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pArr.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;() =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;p2 resolve&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;resp2&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;, &lt;span class=&quot;number&quot;&gt;5000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pArr.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;() =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;p3 resolve&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;resp3&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;, &lt;span class=&quot;number&quot;&gt;3000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; p = &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;all&lt;/span&gt;(pArr);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p.&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resp&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;all is done, doing next&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; p1 resolve&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; p3 resolve&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; p2 resolve&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; all is done, doing next&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="promise" scheme="http://21ido.com/tags/promise/"/>
    
  </entry>
  
  <entry>
    <title>Promise入门指南(3)</title>
    <link href="http://21ido.com/2018/07/65f78d9f/"/>
    <id>http://21ido.com/2018/07/65f78d9f/</id>
    <published>2018-07-15T10:44:55.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;Promise是JavaScript异步编程解决方案，之一&lt;br&gt;以往我们所习惯的回调函数也是之一，还有事件监听和观察者模式（也叫发布订阅模式）也算&lt;br&gt;而Promise是遵循的是Promise/A+规范，像Axios也是遵循这个规范，提供了相同的api&lt;/p&gt;
&lt;p&gt;Promise/A+规范解决了回调函数的一些弊端，比如&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;代码书写逻辑&lt;/li&gt;
&lt;li&gt;更改回调顺序的噩梦&lt;/li&gt;
&lt;li&gt;多步回调的魔鬼嵌套&lt;/li&gt;
&lt;li&gt;回调函数的跟踪&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;但Promise也不是万能的，作为解决方案之一，并不是适合所有的异步场景&lt;/p&gt;
&lt;p&gt;前面说到Promise特征之一就是状态一旦变成 fulfilled 或是 rejected ，则不会再改变，而当执行 then 进行 resolve 和 rejected 回调注册时，返回的其实是一个新的Promise对象&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; p = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;setTimeout&lt;/span&gt;( &lt;span class=&quot;function&quot;&gt;() =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;getTime&lt;/span&gt;());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;dir&lt;/span&gt;(p);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;dir&lt;/span&gt;(p.&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;(&lt;span class=&quot;params&quot;&gt;v&lt;/span&gt;) =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Date&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;getTime&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;));&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="promise" scheme="http://21ido.com/tags/promise/"/>
    
  </entry>
  
  <entry>
    <title>Promise入门指南(2)</title>
    <link href="http://21ido.com/2018/07/7cecbcde/"/>
    <id>http://21ido.com/2018/07/7cecbcde/</id>
    <published>2018-07-13T10:01:16.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; p = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;resolve, reject&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//do something&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;finished&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;someone&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &lt;span class=&quot;number&quot;&gt;2000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;前面提到的这种写法，实际不会这么直接把Promise赋值给p，因为大部分function调用需要传入参数，所以习惯在function里面 &lt;code&gt;new Promise&lt;/code&gt; 示例并return&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;getUrl&lt;/span&gt; = param =&amp;gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;resolve&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//do something&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $.&lt;span class=&quot;title function_&quot;&gt;ajax&lt;/span&gt;(url, &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;response&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(response);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;getUrl&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;).&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;response&lt;/span&gt; =&amp;gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;title function_&quot;&gt;render&lt;/span&gt;(response);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;这是比较标准的写法，还有比较偷懒的写法&lt;br&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="promise" scheme="http://21ido.com/tags/promise/"/>
    
  </entry>
  
  <entry>
    <title>Promise入门指南(1)</title>
    <link href="http://21ido.com/2018/06/57c1ef1d/"/>
    <id>http://21ido.com/2018/06/57c1ef1d/</id>
    <published>2018-06-04T06:48:28.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Promise是异步编程的解决方案&quot;&gt;&lt;a href=&quot;#Promise是异步编程的解决方案&quot; class=&quot;headerlink&quot; title=&quot;Promise是异步编程的解决方案&quot;&gt;&lt;/a&gt;Promise是异步编程的解决方案&lt;/h3&gt;&lt;p&gt;Promise有3种状态&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pending&lt;/li&gt;
&lt;li&gt;fulfilled&lt;/li&gt;
&lt;li&gt;rejected&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对象的状态是不受外界影响的，而且状态的改变只有两种&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;pending -&amp;gt; fulfilled&lt;/li&gt;
&lt;li&gt;pending -&amp;gt; rejected&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;一旦变成fulfilled或rejected，则终止，不会再改变&lt;br&gt;而在pending阶段，是不能取消，即一旦开始执行，就只能等状态改变，无法中途取消操作&lt;/p&gt;
&lt;h3 id=&quot;代码示例&quot;&gt;&lt;a href=&quot;#代码示例&quot; class=&quot;headerlink&quot; title=&quot;代码示例&quot;&gt;&lt;/a&gt;代码示例&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; p = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Promise&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;resolve, reject&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//do something&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;setTimeout&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;finished&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;title function_&quot;&gt;resolve&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;someone&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;, &lt;span class=&quot;number&quot;&gt;2000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="promise" scheme="http://21ido.com/tags/promise/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript学习笔记(2)</title>
    <link href="http://21ido.com/2018/05/383e290e/"/>
    <id>http://21ido.com/2018/05/383e290e/</id>
    <published>2018-05-16T08:29:33.000Z</published>
    <updated>2024-03-08T07:16:49.431Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;数组&quot;&gt;&lt;a href=&quot;#数组&quot; class=&quot;headerlink&quot; title=&quot;数组&quot;&gt;&lt;/a&gt;数组&lt;/h3&gt;&lt;h4 id=&quot;表示法&quot;&gt;&lt;a href=&quot;#表示法&quot; class=&quot;headerlink&quot; title=&quot;[]表示法&quot;&gt;&lt;/a&gt;[]表示法&lt;/h4&gt;&lt;p&gt;在类型定义后面加上[]即表示数组&lt;br&gt;定义的数组不允许出现其它类型，同时支持联合类型&lt;br&gt;&lt;figure class=&quot;highlight ts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;catArr&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;[] = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;catName&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;[] = [&lt;span class=&quot;string&quot;&gt;&amp;quot;one&amp;quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&amp;quot;tow&amp;quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&amp;quot;three&amp;quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;catColor&lt;/span&gt;: (&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;|&lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;)[] = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&amp;quot;tow&amp;quot;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0xFFF&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;catColor.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;four&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;泛型表示法&quot;&gt;&lt;a href=&quot;#泛型表示法&quot; class=&quot;headerlink&quot; title=&quot;泛型表示法&quot;&gt;&lt;/a&gt;泛型表示法&lt;/h4&gt;&lt;figure class=&quot;highlight ts&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;catArr&lt;/span&gt;: &lt;span class=&quot;title class_&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;&amp;gt; = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;catName&lt;/span&gt;: &lt;span class=&quot;title class_&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt; = [&lt;span class=&quot;string&quot;&gt;&amp;quot;one&amp;quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&amp;quot;tow&amp;quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&amp;quot;three&amp;quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;catColor&lt;/span&gt;: &lt;span class=&quot;title class_&quot;&gt;Array&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;boolean&lt;/span&gt;|&lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;&amp;gt; = [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;catColor.&lt;span class=&quot;title function_&quot;&gt;push&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Web" scheme="http://21ido.com/categories/Web/"/>
    
    
      <category term="javascript" scheme="http://21ido.com/tags/javascript/"/>
    
      <category term="typescript" scheme="http://21ido.com/tags/typescript/"/>
    
  </entry>
  
</feed>
